indeedOss.activateFeature 'library'
indeedLibrary.name = 'proctor-webapp-library'

dependencies {
    implementation project(path: ':proctor-common', configuration: 'shadow')
    implementation project(':proctor-store')
    implementation project(':proctor-store-svn')
    implementation project(':proctor-store-git')
    implementation 'com.indeed:util-varexport:1.0.49-1cfb888'
    implementation 'com.indeed:util-core:1.0.49-1cfb888'
    implementation libs.springBeans
    implementation libs.springContext
    implementation libs.springCore
    implementation libs.springJdbc
    implementation libs.springWeb
    implementation libs.springWebmvc
    implementation 'org.apache.commons:commons-collections4:4.3'
    implementation 'org.apache.httpcomponents:httpclient:4.5.5'
    implementation libs.commonsIo
    implementation libs.jacksonCore
    implementation libs.svnkit
    implementation libs.guava
    implementation libs.log4jCore
    implementation libs.log4jApi
    implementation libs.jacksonDatabind
    implementation libs.commonsLang
    implementation libs.tomcatElApi
    compileOnly libs.tomcatServletApi
    compileOnly libs.jsr305
    implementation libs.servletApi
    implementation libs.junit
    implementation libs.assertj
    implementation libs.mockito
}

tasks.named("compileJava").configure { dependsOn(":proctor-common:jar") }

publishing {
    publications {
        mavenJavaWebappLib(MavenPublication) {
            groupId = 'com.indeed'
            artifactId = 'proctor-webapp-library' // use the name from ext['indeed.publish.name']
            version = '9999-SNAPSHOT' // use whatever version makes sense for your project

            from components.java
        }
    }
}